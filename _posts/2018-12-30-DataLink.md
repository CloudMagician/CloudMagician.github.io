---
layout:	post
title:	"Data-Link"
image:	''
date:	2018-12-30 16:11:14
tags:	
- Network
- Exam
description: 'My life for pass!'
categories:
- Network
---

<script type="text/javascript" src="../MathJax/MathJax.js?config=default"></script>

# 线路规程

线路规程是监视链路的建立，以及在给定时刻分配一个具体设备进行数据传送的权利。

* 询问/确认方式(ENQ/ACK)
* 轮询/选择方式(Poll/Select)

# 流量控制与差错控制

* 流量控制是一组过程，这组过程是用来告诉发送方在等待接收方的确认信号之前最多可以传送多少数据。
* 差错控制主要指错误检测和重传方法。

## 停止等待协议

发送方每发送一帧后就等待应答。只有收到一个应答(ACK)后，才发送下一个帧。直到发送方发送一个传输结束帧。 

* 完成一帧发送所需的最短时间：
  $$
  t_W=t_I+2t_P+2t_{Proc}+t_S
  $$
  $$t_I$$：发送数据帧时间=帧长/数据传输率
  $$t_S$$：发送确认帧时间=确认帧长/数据传输率
  $$t_P$$：信号传输延时=距离/信号传输速度
  $$t_{Proc}$$：节点处理数据时间

* 信道利用率：信道被占用的时间和总时间之比。
  $$
  P=(t_I+t_P)/t_W
  $$

* 有效数据传输率：单位时间内传输的有效数据位数。
  $$
  S=N/t_W
  $$

* 有差错时正确传送一帧的平均时间：
  $$
  t_V=t_W/(1-p)
  $$



* 系统最大吞吐量：(每秒成功发送的帧数)

* $$
  λ_{max} =1/t_V= (1-p)/t_W
  $$



* 极限吞吐量：$$M = 1/t_I$$

## 滑动窗口协议

* 流量控制

  发送方在收到应答消息前可以发送若干帧。 

  接收方使用一个ACK帧来对多个数据帧的接收进行确认。具体可以接受多少帧视窗口大小而定。 

* 差错控制

  * 回退N自动重传请求(Go-back-N)
  * 选择拒绝自动重传请求(Select-Rej)

* 窗口大小的选择
  $$
  nt_I>2(t_I+t_P)
  $$





## 成帧的方法

# HDLC通信协议

* 面向比特型协议

## 帧格式

* 信息帧(I-帧)：数据及与数据有关的控制信息
* 监控帧(S-帧)：流量和错误控制信息
* 无编号帧(U-帧)：链路管理服务

1. 标志字段：一个字节(8位)，其比特模式为01111110；表示一个帧的开始和结束，并且为接收方提供同步手段。
   * 位填充法：发送方发送一个含有五个以上连续1的数据时，它总是在第五个1后面插入一个冗余的0。不管第六个比特是0还是1，接收方接收时作相反的动作(去掉5个1后面的零)。 
2. 地址字段：
3. 控制字段：

# IEEE局域网通信协议

# 以太网

* 以太网发送的数据使用曼彻斯特(Manchester)编码

* IEEE将基带类划分为5个不同的标准:10Base5、 10Base2、10Base-T、1Base5和100base-T。

  开头数字指明了数据传输速率;最后的数字或字母(5/2/T)指明了最大电缆长度或电缆的类别;base指明的是基带传输。 

## CSMA/CD

“边听边说”：带有冲突检测的载波侦听多路访问；在传输的时候继续监听链路是否发生冲突 。

* 算法描述: 

  1. 如果链路是空闲的，则可以发送并同时检测冲突。
  2.  如果链路是忙的，则继续侦听，直到检测到链路空闲。 
  3. 如果在发送过程中检测到冲突，则停止当前帧的发送，发阻塞信号，等待一段选定的时间(由退避算法决定)。

* 检测冲突所需的时间称为冲突检测窗口。冲突检测窗口等于任意两个站点之间最大的传播延迟的两倍。

* 最短帧长的计算公式：
  $$
  F_{min}=2R×D/V
  $$

  * Fmin：最短数据帧长(bit)
  * R：数据传输速率(bps)
  * D：任意两站点间的最大距离(m)
  * V：电子传播速度(m/s)

* CSMA/CD退避算法：

  - 对每一个帧，当第一次发生冲突时，设置参数L=2 

  - 退避间隔取1到L个时间片中的一个随机数。（一个时间片等于链路上最大传输延迟的2倍）

  - 当帧重复发生一次冲突时，则将参数L加倍。L的最大值为1024。即当L增加到1024时，L不再增加 

  - 帧的最大重传次数为16，超过这个次数，则该帧不再重传，并报告出错 

  - 发送站等待的时间：
    $$
    t=R×2T
    $$

    * R是$$(0,2^{min(k,10)})$$之间的随机数。
    * k是冲突次数，最大为16。

## 4B/5B编码

* 每个5比特码组中不含多于 3个“0” ；
* 或者5比特码组中包含不少 于2个“1” 。

# 无线局域网

## CSMA/CA协议

工作原理：如果某站点有数据要发送，它首先侦听信道，并根据下列不同的情形进行相应的处理：

- 如果信道空闲，继续等待IFS(帧间隔)时间，然后再侦听信道;如果信道仍然空闲，立即发送数据；
- 如果信道忙，该站点继续侦听信道，直到当前传输完全结束；
- 一旦当前传输结束，站点继续等待IFS时间，然后再侦听信道，如果信道仍然保持空闲，站点按指数后退一个随机长的时间后，发送数据。

## 二进制指数退避算法

第 i 次退避就在 22 + i 个时隙中随机地选择一个，即：第i次退避是在时隙{0, 1, ..., 22+i – 1}中随机 地选择一个。

##  冲突避免技术

- 预约信道：使用RTS/CTS机制(请求发送/允许发送) ，向其它站发出通告，本站将占用多长时间， 其它站不要发送数据并调整其网络分配向量NAV， 以免冲突。 
  * NAV：信道处于忙状态的时间；
  * 可以解决隐藏站问题。
- 正向确认:接收站正确收到数据要发确认帧，否则源站点重复发送数据帧。 

# 数据链路层网络互连

## 网桥

网桥在数据链路层上进行数据帧的存贮和转发。常用于局域网的互连。

## 网桥路由算法

* 固定路由网桥
* 透明网桥
* 源路由网桥

## 生成树算法(Spanning Tree)：

