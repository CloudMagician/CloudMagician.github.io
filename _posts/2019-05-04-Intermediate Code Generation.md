---
layout:	post
title:	"Intermediate Code Generation"
image:	''
date:	2019-05-04 14:21:40
tags:	
- Exam
description: 'My life for pass!'
categories:
- Compilation Principle
---

<script type="text/javascript" src="../MathJax/MathJax.js?config=default"></script>
# 中间语言

- 后缀式----逆波兰式

  特别是表达式的内部表示

- 图结构中间代码

  * 抽象语法树

  - 有向不循环图

- 三地址中间代码

  * 三元式

  - 四元式

## 后缀表达式相关

- 中缀变后缀算法

  1. 初始化一个空堆栈，将结果字符串变量置空。
  2. 从左到右读入中缀表达式，每次一个字符。
  3. 如果字符是操作数，将它添加到结果字符串。
  4. 如果字符是操作符，弹出操作符，直至遇见开括号、优先级较低的操作符或者同一优先级的右结合符号。把这个操作符压入栈。
  5. 如果字符是个开括号，把它压入堆栈。
  6. 如果字符是个闭括号，在遇见开括号前，弹出所有操作符，然后把它们添加到结果字符串。
  7. 如果到达输入字符串的末尾，弹出所有操作符并添加到结果字符串。
- 后缀计算算法

## 抽象语法树AGT和有向不循环图DAG

- 抽象语法树

- - 表达式的AGT
    * 中间节点：运算符
    * 叶节点：操作数
  - 推广到程序

- 有向不循环图

- - 共享子树

## 三地址中间代码

三元式：（ω，op1，op2）

四元式：（ω，op1，op2，result）

### 四元式操作符分类

- 算术、逻辑、关系运算符 ADDI,ADDF,AND,GE;
- IO操作
- 类型转换		(FLOAT,id1,-,id2)
- 赋值		(ASSIG,id1,n,id2)
- 地址加		(AADD,id1,id2,id3)
- 标号		(LABEL,-,-,label)
- 转移		JMP,JMP0,JMP1;
- 过程调用		(CALL,<f>,bool,result)
- 传送参数		VALACT,VARACT;

# 语法制导方法

基于文法结构，在每个产生式的右部增加语义动作，在语法分析过程中，如遇语义动作，就完成对应的语义处理。

## 属性文法

- 属性直接与文法的符号相联系
- 若X为一文法符号，a为X的一个属性，用X.a表示与X关联的a的值
- 对于每个文法规则X0->X1…Xn,Xi的属性Xi.aj与规则的其他符号的属性a1,…,ak有关

Xi.aj =fij(X0.a1, …, Xn.ak)

## 动作文法

- 文法规则与语义函数相联系

- - 每个产生式的右部附着相应的语义动作
  - 每个动作对应一个函数

- 动作文法的定义由语法分析的实现方式决定